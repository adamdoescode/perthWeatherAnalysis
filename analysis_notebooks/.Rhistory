group_by(NAME, Month) %>%
#calculate proportion rainfall for a given day
mutate(proportion_rained = number_of_rainy_days/days_observed)
prop_rained_all
prop_rained_all <- NOAA_all_stations_clean %>%
group_by(Month, NAME, Day) %>%
summarise(
number_of_rainy_days = sum(did_rain), days_observed = n()
) %>%
group_by(NAME, Month) %>%
#calculate proportion rainfall for a given day
mutate(proportion_rained = number_of_rainy_days/days_observed)
#we add an index so we can count the days
prop_rained_all %>%
group_by(NAME) %>%
mutate(dayIndex = row_number(NAME))
prop_rained_all <- NOAA_all_stations_clean %>%
group_by(Month, NAME, Day) %>%
summarise(
number_of_rainy_days = sum(did_rain), days_observed = n()
) %>%
# group_by(NAME, Month) %>%
#calculate proportion rainfall for a given day
mutate(proportion_rained = number_of_rainy_days/days_observed)
#we add an index so we can count the days
prop_rained_all %>%
group_by(NAME) %>%
mutate(dayIndex = row_number(NAME))
#we add an index so we can count the days
prop_rained_all %>%
group_by(NAME) %>%
mutate(dayIndex = row_number(NAME)) %>%
tail()
NOAA_all_stations_clean %>%
group_by(Month, NAME, Day) %>%
summarise(
number_of_rainy_days = sum(did_rain), days_observed = n()
)
prop_rained_all <- NOAA_all_stations_clean %>%
group_by(Month, NAME, Day) %>%
summarise(
number_of_rainy_days = sum(did_rain), days_observed = n()
) %>%
#change na to 0
mutate(number_of_rainy_days = ifelse(is.na(number_of_rainy_days),0,number_of_rainy_days))
prop_rained_all <- NOAA_all_stations_clean %>%
group_by(Month, NAME, Day) %>%
summarise(
number_of_rainy_days = sum(did_rain), days_observed = n()
) %>%
#change na to 0
mutate(number_of_rainy_days = ifelse(is.na(number_of_rainy_days),0,number_of_rainy_days)) %>%
#calculate proportion rainfall for a given day
mutate(proportion_rained = number_of_rainy_days/days_observed)
#we add an index so we can count the days
prop_rained_all %>%
group_by(NAME) %>%
mutate(dayIndex = row_number(NAME))
prop_rained_all <- NOAA_all_stations_clean %>%
group_by(Month, NAME, Day) %>%
summarise(
number_of_rainy_days = sum(did_rain), days_observed = n()
) %>%
#change na to 0
mutate(number_of_rainy_days = ifelse(is.na(number_of_rainy_days),0,number_of_rainy_days)) %>%
#calculate proportion rainfall for a given day
mutate(proportion_rained = number_of_rainy_days/days_observed) %>%
#we add an index so we can count the days
group_by(NAME) %>%
mutate(dayIndex = row_number(NAME))
prop_rained_all
prop_rained_all %>%
ggplot(aes(dayIndex, proportion_rained, colour = NAME)) +
geom_point()
prop_rained_all <- NOAA_all_stations_clean %>%
drop_na(PRCP) %>%
group_by(Month, NAME, Day) %>%
summarise(
number_of_rainy_days = sum(did_rain), days_observed = n()
) %>%
#change na to 0
mutate(number_of_rainy_days = ifelse(is.na(number_of_rainy_days),0,number_of_rainy_days)) %>%
#calculate proportion rainfall for a given day
mutate(proportion_rained = number_of_rainy_days/days_observed) %>%
#we add an index so we can count the days
group_by(NAME) %>%
mutate(dayIndex = row_number(NAME))
prop_rained_all %>%
ggplot(aes(dayIndex, proportion_rained, colour = NAME)) +
geom_point()
prop_rained_all <- NOAA_all_stations_clean %>%
drop_na(PRCP) %>%
group_by(Month, NAME, Day) %>%
summarise(
number_of_rainy_days = sum(did_rain), days_observed = n()
) %>%
#change na to 0
mutate(number_of_rainy_days = ifelse(is.na(number_of_rainy_days),0,number_of_rainy_days)) %>%
#calculate proportion rainfall for a given day
mutate(proportion_rained = number_of_rainy_days/days_observed) %>%
#we add an index so we can count the days
group_by(NAME) %>%
mutate(dayIndex = row_number(NAME))
prop_rained_all %>%
ggplot(aes(dayIndex, proportion_rained, colour = NAME)) +
geom_point() +
geom_smooth()
prop_rained_all %>%
ggplot(aes(dayIndex, proportion_rained, colour = NAME)) +
geom_point(alpha=0.1) +
geom_smooth()
prop_rained_all %>%
ggplot(aes(dayIndex, proportion_rained, colour = NAME)) +
geom_point(alpha=0.1) +
geom_smooth()
prop_rained_all %>%
ggplot(aes(dayIndex, proportion_rained, colour = NAME)) +
geom_point(alpha=0.1) +
geom_smooth() +
ggtitle("Risk of any rain for each day in the year") +
xlab("day (0 is January 1st)") +
ylab("Risk of rain")
prop_rained_all %>%
ggplot(aes(dayIndex, proportion_rained, colour = NAME)) +
geom_point(alpha=0.1) +
geom_smooth() +
ggtitle("Risk of any rain for each day in the year") +
xlab("day (0 is January 1st)") +
ylab("Risk of rain") +
ylim(c(0,1))
prop_rained_all
prop_rained_all %>%
group_by(NAME) %>%
summarise(max(proportion_rained))
prop_rained_all %>%
group_by(NAME) %>%
summarise(max(proportion_rained)) %>%
arrange(desc(proportion_rained))
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(proportion_rained))
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained))
NOAA_all_stations_clean
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained))
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
right_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
inner_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean, by="NAME")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
inner_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", keep=FALSE)
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first")
prop_rained_all %>%
group_by(NAME) %>%
summarise(max_proportion_rained = max(proportion_rained)) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first") %>%
ggplot(aes(LATITUDE, LONGITUDE, colour = max_proportion_rained)) +
geom_point()
prop_rained_all %>%
group_by(NAME) %>%
summarise(
max_proportion_rained = max(proportion_rained),
mean_proportion_rained = mean(proportion_rained)
) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first") %>%
ggplot(aes(LATITUDE, LONGITUDE, colour = max_proportion_rained)) +
geom_point()
prop_rained_all %>%
group_by(NAME) %>%
summarise(
max_proportion_rained = max(proportion_rained),
mean_proportion_rained = mean(proportion_rained)
)
prop_rained_all %>%
group_by(NAME) %>%
summarise(
max_proportion_rained = max(proportion_rained),
mean_proportion_rained = mean(proportion_rained)
) %>%
arrange(desc(max_proportion_rained)) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first") %>%
ggplot(aes(LATITUDE, LONGITUDE, colour = mean_proportion_rained)) +
geom_point()
prop_rained_all %>%
group_by(NAME) %>%
summarise(
max_proportion_rained = max(proportion_rained),
mean_proportion_rained = mean(proportion_rained)
) %>%
arrange(desc(max_proportion_rained))
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(sum(PRCP))
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(sum(PRCP, na.rm = TRUE))
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(mean(PRCP, na.rm = TRUE))
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(meanRainfall= mean(PRCP, na.rm = TRUE))
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
)
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first")
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first") %>%
ggplot(aes(meanRainfall, LATITUDE)) + geom_point()
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first") %>%
ggplot(aes(meanRainfall, LATITUDE)) + geom_point() +
dark_theme_bw()
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first") %>%
ggplot(aes(meanRainfall, LONGITUDE)) + geom_point() +
dark_theme_bw()
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first") %>%
ggplot(aes(meanTMAX, LONGITUDE)) + geom_point() +
dark_theme_bw()
NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first") %>%
ggplot(aes(meanTMAX, LATITUDE)) + geom_point() +
dark_theme_bw()
weatherSummary_all_stations <- NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first") %>%
ggplot(aes(meanTMAX, LATITUDE)) + geom_point() +
dark_theme_bw()
weatherSummary_all_stations <- NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first")
weatherSummary_all_stations %>%
ggplot(aes(meanTMAX, LATITUDE)) + geom_point() +
dark_theme_bw()
weatherSummary_all_stations %>%
ggplot(aes(meanTMAX, LATITUDE)) + geom_point() +
dark_theme_bw()
weatherSummary_all_stations
corr(weatherSummary_all_stations)
cor(weatherSummary_all_stations)
weatherSummary_all_stations
weatherSummary_all_stations <- NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
maxTMAX = max(TMAX, na.rm = TRUE),
maxTMIN = max(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first")
weatherSummary_all_stations
weatherSummary_all_stations %>%
ggplot(aes(meanTMAX, LATITUDE)) + geom_point() +
dark_theme_bw()
weatherSummary_all_stations
weatherSummary_all_stations %>%
ggplot(aes(maxTMAX, LATITUDE)) + geom_point() +
dark_theme_bw()
weatherSummary_all_stations %>%
ggplot(aes(maxTMAX, LONGITUDE)) + geom_point() +
dark_theme_bw()
weatherSummary_all_stations %>%
ggplot(aes(maxTMAX, LONGITUDE+LATITUDE)) + geom_point() +
dark_theme_bw()
weatherSummary_all_stations %>%
ggplot(aes(maxTMAX, LONGITUDE+LATITUDE)) + geom_point() +
geom_smooth(method = "lm")
weatherSummary_all_stations <- NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
maxTMAX = max(TMAX, na.rm = TRUE),
maxTMIN = max(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first")
weatherSummary_all_stations
weatherSummary_all_stations %>%
ggplot(aes(maxTMAX, LONGITUDE+LATITUDE)) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw()
weatherSummary_all_stations %>%
ggplot(aes(maxTMIN, LONGITUDE+LATITUDE)) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record low temperature and location")
weatherSummary_all_stations <- NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
maxTMAX = max(TMAX, na.rm = TRUE),
maxTMIN = max(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first")
weatherSummary_all_stations
weatherSummary_all_stations %>%
ggplot(aes(maxTMAX, LONGITUDE+LATITUDE)) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record high temperature and location")
weatherSummary_all_stations %>%
ggplot(aes(maxTMIN, LONGITUDE+LATITUDE)) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record low temperature and location")
weatherSummary_all_stations <- NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
maxTMAX = max(TMAX, na.rm = TRUE),
maxTMIN = max(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first")
weatherSummary_all_stations
weatherSummary_all_stations %>%
ggplot(aes(LONGITUDE+LATITUDE, maxTMAX)) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record high temperature and location")
weatherSummary_all_stations %>%
ggplot(aes(LONGITUDE+LATITUDE, maxTMIN)) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record low temperature and location")
weatherSummary_all_stations %>%
ggplot(aes(LONGITUDE+LATITUDE, maxTMIN, colour = NAME == "ROTTNEST")) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record low temperature and location")
weatherSummary_all_stations <- NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
maxTMAX = max(TMAX, na.rm = TRUE),
maxTMIN = max(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first")
weatherSummary_all_stations
weatherSummary_all_stations %>%
ggplot(aes(LONGITUDE+LATITUDE, maxTMAX)) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record high temperature and location")
weatherSummary_all_stations %>%
ggplot(aes(LONGITUDE+LATITUDE, maxTMIN, colour = NAME == "ROTTNEST")) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record low temperature and location")
weatherSummary_all_stations <- NOAA_all_stations_clean %>%
group_by(NAME) %>%
summarise(
meanRainfall = mean(PRCP, na.rm = TRUE),
meanTMAX = mean(TMAX, na.rm = TRUE),
meanTMIN = mean(TMIN, na.rm = TRUE),
maxTMAX = max(TMAX, na.rm = TRUE),
maxTMIN = max(TMIN, na.rm = TRUE),
) %>%
left_join(., NOAA_all_stations_clean %>% select(NAME, LATITUDE, LONGITUDE), by="NAME", multiple="first")
weatherSummary_all_stations
weatherSummary_all_stations %>%
ggplot(aes(LONGITUDE, maxTMAX)) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record high temperature and location")
weatherSummary_all_stations %>%
ggplot(aes(LONGITUDE, maxTMIN, colour = NAME == "ROTTNEST")) + geom_point() +
geom_smooth(method = "lm") +
dark_theme_bw() +
ggtitle("relationship between record low temperature and location")
prop_rained_all %>%
ggplot(aes(dayIndex, proportion_rained, colour = NAME)) +
geom_point(alpha=0.1) +
geom_smooth(se=FALSE) +
ggtitle("Risk of any rain for each day in the year") +
xlab("day (0 is January 1st)") +
ylab("Risk of rain") +
ylim(c(0,1))
rbind(
NOAA_all_stations %>% count(is.na(TMAX))
NOAA_all_stations %>% count(is.na(TMIN))
rbind(
NOAA_all_stations %>% count(is.na(TMAX)),
NOAA_all_stations %>% count(is.na(TMIN)),
NOAA_all_stations %>% count(is.na(PRCP))
)
cbind(
NOAA_all_stations %>% count(is.na(TMAX)),
NOAA_all_stations %>% count(is.na(TMIN)),
NOAA_all_stations %>% count(is.na(PRCP))
)
cbind(
NOAA_all_stations %>% count(is.na(TMAX)),
NOAA_all_stations %>% count(is.na(TMIN)),
NOAA_all_stations %>% count(is.na(PRCP))
)
